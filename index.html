import React, { useEffect, useMemo, useState } from "react";

export default function Portfolio() {
  const [lang, setLang] = useState<"en" | "sa">("en");
  const [activeTab, setActiveTab] = useState<{ [k: string]: string }>({
    workshops: "national",
    seminars: "national",
  });
  const [now, setNow] = useState(new Date());

  useEffect(() => {
    const t = setInterval(() => setNow(new Date()), 1000);
    return () => clearInterval(t);
  }, []);

  // --- Date Formats ---
  const monthsEn = [
    "January","February","March","April","May","June",
    "July","August","September","October","November","December"
  ];

  const adDate = useMemo(() => {
    const day = String(now.getDate()).padStart(2, "0");
    const month = monthsEn[now.getMonth()];
    const year = now.getFullYear();
    return `${day}, ${month}, ${year}`;
  }, [now]);

  const vikramSamvatDate = useMemo(() => {
    const vsYear = now.getFullYear() + 57; // Approximate
    const month = String(now.getMonth() + 1).padStart(2, "0");
    const day = String(now.getDate()).padStart(2, "0");
    return `वि.सं ${vsYear} — वर्ष ${vsYear}, महिना ${month}, दिन ${day}`;
  }, [now]);

  // --- Multilingual Text ---
  const t = {
    en: {
      name: "Sudarshan Gautam",
      heroSub: "Researcher in Linguistics, Traditional Vedic Literature, Sanskrit Literature, Indian Knowledge System (IKS) & NLP",
      nav: {
        home: "Home", about: "About Me", awards: "Awards & Achievements",
        skills: "Skills & Expertise", workshops: "Workshops",
        seminars: "Seminars/Conferences", lectures: "Lectures",
        publications: "Publications", gallery: "Gallery", contact: "Contact"
      },
      buttons: { cv: "Download CV", viewDoc: "View Document" },
      about: {
        heading: "About Me",
        p1: "I began my education in a gurukula, a traditional residential system of learning, where I was immersed in classical knowledge under the guidance of my guru. This early education provided me with a deep understanding of discipline, values, and the holistic approach of traditional scholarship.",
        p2: "After completing my B.A (Shastri) and M.A (Acharya) in Pāṇinian Grammar, I studied major branches of Indian philosophy, including Nyāya Darśana, Mīmāṃsā Darśana, and other classical Shastras, gaining a strong foundation in logic, linguistics, and analytical reasoning.",
        p3: "I am currently pursuing a PhD in Computational Linguistics at the Indian Institute of Technology (IIT), Banaras Hindu University (BHU), Varanasi, focusing on Paninian Grammar. My research combines insights from classical grammar with modern computational methods, bridging traditional linguistic theory and contemporary language technology."
      },
      awards: "Awards & Achievements",
      skills: "Skills & Expertise",
      ws: { heading: "Workshops & Training", national: "National", international: "International" },
      sem: { heading: "Seminars/Conferences", national: "National", international: "International" },
      lectures: "Lectures",
      publications: "Publications",
      gallery: "Gallery",
      additional: "Additional Info",
      contact: "Contact",
      topbar: { ad: (s: string) => `AD — ${s}` },
    },
    sa: {
      name: "सुदर्शनः गौतमः",
      heroSub: "भाषाविज्ञानम्, वैदिकपरम्परा, संस्कृतसाहित्यं, भारतीयज्ञानपरम्परा (IKS), च तथा NLP इत्यत्र शोधकर्ता",
      nav: {
        home: "मुख्यम्", about: "मदीयविषये", awards: "पुरस्काराः च उपलब्धयः",
        skills: "कौशलम् विशेषज्ञताच", workshops: "कार्यशालाः", seminars: "सम्मेलनानि/सङ्गोष्ठ्यः",
        lectures: "व्याख्यानानि", publications: "प्रकाशनानि", gallery: "चित्रसमाहारः", contact: "सम्पर्कः"
      },
      buttons: { cv: "जीवनवृत्तम् आदाय", viewDoc: "दस्तावेजं पश्यतु" },
      about: {
        heading: "मदीयविषये",
        p1: "गुरुकुले मम अध्ययनस्य आरम्भः अभवत्—यत्र गुरोः सन्निधौ पारम्परिके शिक्षणप्रणाली उपवसन् अहं शास्त्रीयज्ञानसम्पद् निमग्नः आसम्। अस्य पूर्वस्य शिक्षणस्य परिणामः अनुशासनस्य मूल्यानां च गम्भीरबोधः तथा समग्रविद्यापद्धतेः अवगमः।",
        p2: "शास्त्री (B.A.) तथा आचार्य (M.A.) इति पाणिनीयव्याकरणविशये अध्ययनं कृत्वा अहं न्यायदर्शनं मीमांसादर्शनं चान्ये च शास्त्रवर्गाः अवगतम्; तेन तर्के, भाषाविज्ञाने, विश्लेषणकौशले च दृढं आधारं प्राप्तम्।",
        p3: "वरणास्यां भारतीयतन्त्रज्ञानसंस्थाने (IIT-BHU) सङ्गणकभाषाविज्ञानविषये अहं पीएच्.डी. करोमि, पाणिनीयव्याकरणे विशेषदृष्ट्या। मदीयम् अनुसंधानं पारम्परिकव्याकरणतत्त्वानि आधुनिकसङ्गणकीयपद्धतिभिः संयोजयति।"
      },
      awards: "पुरस्काराः च उपलब्धयः",
      skills: "कौशलम् विशेषज्ञताच",
      ws: { heading: "कार्यशालाः", national: "राष्ट्रीया:", international: "आन्तर्राष्‍ट्रीया:" },
      sem: { heading: "सम्मेलनानि/सङ्गोष्ठ्यः", national: "राष्ट्रीया:", international: "आन्तर्राष्‍ट्रीया:" },
      lectures: "व्याख्यानानि",
      publications: "प्रकाशनानि",
      gallery: "चित्रसमाहारः",
      additional: "अतिरिक्त-विवरणम्",
      contact: "सम्पर्कः",
      topbar: { ad: (s: string) => `वैश्विक संवत् — ${s}` },
    },
  } as const;

  const txt = t[lang];

  const gallery = useMemo(() => [
    { src: "https://picsum.photos/seed/sg1/800/600", title: "Workshop on Pāṇinian Grammar", caption: "Interactive session with students and scholars." },
    { src: "https://picsum.photos/seed/sg2/800/600", title: "Conference on NLP & Sanskrit", caption: "Presented research on USR compounding." },
    { src: "https://picsum.photos/seed/sg3/800/600", title: "Traditional Yajña Ceremony", caption: "Participation in Vedic ritual context." },
    { src: "https://picsum.photos/seed/sg4/800/600", title: "Seminar at BHU", caption: "Discussion on computational Paninian models." },
    { src: "https://picsum.photos/seed/sg5/800/600", title: "Lecture on Śābdabodha", caption: "Bridging traditional theory and NLP." },
    { src: "https://picsum.photos/seed/sg6/800/600", title: "Shāstrārtha Roundtable", caption: "Debate on compound semantics." },
  ], []);

  const AwardCard: React.FC<{ title: string; bullets?: string[]; docUrl?: string }> = ({ title, bullets = [], docUrl = "#" }) => (
    <div className="bg-white/70 backdrop-blur rounded-2xl p-6 shadow-sm hover:shadow-md transition">
      <h4 className="font-semibold text-lg mb-2">{title}</h4>
      {bullets.length > 0 && (
        <ul className="list-disc pl-5 space-y-1 text-sm">
          {bullets.map((b,i) => <li key={i}>{b}</li>)}
        </ul>
      )}
      <div className="mt-4">
        <a href={docUrl} target="_blank" className="inline-block px-4 py-2 rounded-full bg-rose-600 text-white font-medium hover:bg-rose-700">
          {txt.buttons.viewDoc}
        </a>
      </div>
    </div>
  );

  return (
    <div className="min-h-screen bg-slate-50 text-slate-800">
      {/* Top Bar */}
      <div className="relative w-full bg-indigo-900 text-white text-sm py-2 px-4 flex items-center justify-center">
        <div className="flex flex-col items-center gap-0.5 md:flex-row md:gap-4">
          <span className="font-medium">{txt.topbar.ad(adDate)}</span>
          <span className="opacity-80">{vikramSamvatDate}</span>
        </div>
        <button onClick={() => setLang(l => l === "en" ? "sa" : "en")} 
          className="absolute right-3 top-1/2 -translate-y-1/2 rounded-lg bg-rose-500 hover:bg-rose-600 px-3 py-1 text-xs font-semibold">
          {lang === "en" ? "संस्कृत / English" : "English / संस्कृत"}
        </button>
      </div>

      {/* Header */}
      <header className="h-[80vh] grid place-items-center text-center text-white"
        style={{
          backgroundImage: "linear-gradient(-45deg,#ff6b6b,#f8e16c,#6bc1ff,#a8ff78)",
          backgroundSize: "400% 400%",
          animation: "gradientShift 20s ease infinite"
        }}
      >
        <div className="max-w-3xl px-4">
          <h1 className="text-4xl md:text-6xl font-extrabold drop-shadow">{txt.name}</h1>
          <p className="mt-4 text-lg md:text-xl opacity-95">{txt.heroSub}</p>
          <a href="#" className="inline-block mt-8 rounded-full bg-white text-rose-600 font-bold px-6 py-3 hover:translate-y-[-2px] transition">{txt.buttons.cv}</a>
        </div>
      </header>

      {/* About */}
      <section id="about" className="max-w-6xl mx-auto px-4 py-16">
        <h2 className="text-3xl font-bold text-indigo-900 text-center mb-10">{txt.about.heading}</h2>
        <div className="grid md:grid-cols-[260px_1fr] gap-8 items-start bg-white rounded-2xl p-6 shadow">
          <img src="https://picsum.photos/seed/profileSG/500/500" alt="Profile" className="w-52 h-52 md:w-64 md:h-64 object-cover rounded-full shadow"/>
          <div className="space-y-4 leading-relaxed">
            <p>{txt.about.p1}</p>
            <p>{txt.about.p2}</p>
            <p>{txt.about.p3}</p>
          </div>
        </div>
      </section>

      {/* Gallery */}
      <section id="gallery" className="max-w-6xl mx-auto px-4 py-16">
        <h2 className="text-3xl font-bold text-indigo-900 text-center mb-10">{txt.gallery}</h2>
        <div className="grid sm:grid-cols-2 md:grid-cols-3 gap-6">
          {gallery.map((g, i) => (
            <div key={i} className="rounded-2xl overflow-hidden shadow hover:shadow-lg transition bg-white">
              <img src={g.src} alt={g.title} className="w-full h-48 object-cover"/>
              <div className="p-4">
                <h4 className="font-semibold">{g.title}</h4>
                <p className="text-sm opacity-80">{g.caption}</p>
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Awards / Skills / Publications / Contact sections can be added similarly using same Tailwind + cards pattern */}

      <style>{`
        @keyframes gradientShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
      `}</style>
    </div>
  );
}
